\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{itemize-setup}[2025/06/08 Custom itemize setup using enumitem for eskdx style]

\RequirePackage{enumitem}

% Ensure this package is loaded AFTER eskdx.tex so \leftmargini etc. and \parindent are defined.
% Default eskdx values (for reference from eskdtext.sty):
% \parindent is often 1.25cm (set by eskdx options)
% \leftmargini 2.5em
% \leftmarginii 2.2em
% \leftmarginiii 1.87em
% \leftmarginiv 1.7em
% \labelsep .5em (for all list environments)

% Vertical spacing parameters from eskdx's \@listI (for first level)
% \topsep 5\p@ \@plus2\p@ \@minus4\p@
% \parsep 2\p@ \@plus\p@ \@minus\p@
% \itemsep \parsep

% General settings for all levels of itemize
\setlist[itemize]{%
  align=parleft,        % Subsequent lines of item body align with first line of item body.
  listparindent=0pt,    % No paragraph indentation within the item body.
  labelsep=0.5em,       % eskdx default for labelsep.
  % Vertical spacing (simplified from eskdx defaults):
  topsep = 5pt, 
  parsep = 2pt, 
  itemsep = 2pt, % eskdx sets itemsep = parsep
  nolistsep=false       % eskdx doesn't seem to use an equivalent of nolistsep.
}

% Level 1: em-dash. Indent matches document's paragraph indent.
\setlist[itemize,1]{%
  label=\textemdash,
  leftmargin=\parindent   % Use document's paragraph indent for the first level list margin.
}

% Level 2: en-dash. Uses eskdx's specific indent for level 2.
\setlist[itemize,2]{%
  label=\textendash,
  leftmargin=\leftmarginii % This is an absolute indent from the main text margin.
}

% Level 3: asterisk. Uses eskdx's specific indent for level 3.
\setlist[itemize,3]{%
  label=*,
  leftmargin=\leftmarginiii % Absolute indent.
}

% Level 4: period. Uses eskdx's specific indent for level 4.
\setlist[itemize,4]{%
  label=.,
  leftmargin=\leftmarginiv  % Absolute indent.
}

% Sanity check for eskdx lengths and \parindent at begin document
% This helps confirm that eskdx.sty (which defines these) is loaded before this file,
% and that \parindent has a non-zero value.
\AtBeginDocument{%
  \ifdim\parindent=0pt
    \PackageWarning{itemize-setup}{Document \string\parindent\space is 0pt. First level itemize indent will also be 0pt. Ensure \string\parindent\space is set correctly for GOST (e.g., 1.25cm).}
  \fi
  \@ifundefined{leftmarginii}{\PackageWarning{itemize-setup}{\string\leftmarginii\space is not defined. eskdx might not be loaded before itemize-setup.}}{}%
  \@ifundefined{leftmarginiii}{\PackageWarning{itemize-setup}{\string\leftmarginiii\space is not defined.}}{}%
  \@ifundefined{leftmarginiv}{\PackageWarning{itemize-setup}{\string\leftmarginiv\space is not defined.}}{}%
}

\endinput
%%
%% End of file `itemize-setup.tex'.
